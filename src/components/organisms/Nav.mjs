// Generated by ReScript, PLEASE EDIT WITH CARE

import * as React from "react";
import * as Localized from "../shared/Localized.mjs";
import * as LangSwitch from "../molecules/LangSwitch.mjs";
import * as Caml_option from "rescript/lib/es6/caml_option.js";
import * as Core__Option from "@rescript/core/src/Core__Option.mjs";
import * as ReactRouterDom from "react-router-dom";
import * as JsxRuntime from "react/jsx-runtime";
import * as GlobalQueryProvider from "../layouts/GlobalQueryProvider.mjs";
import * as NavigationMenu from "../ui/navigation-menu";

import { css, cx } from '@linaria/core'
;

import { t } from '@lingui/macro'
;

function Nav$Viewer(props) {
  var globalQuery = React.useContext(GlobalQueryProvider.context);
  var viewer = GlobalQueryProvider.Fragment.use(globalQuery);
  return Core__Option.getOr(Core__Option.flatMap(viewer.user, (function (user) {
                    return Core__Option.map(user.lineUsername, (function (lineUsername) {
                                  return JsxRuntime.jsxs(JsxRuntime.Fragment, {
                                              children: [
                                                JsxRuntime.jsx("span", {
                                                      children: lineUsername
                                                    }),
                                                " ",
                                                JsxRuntime.jsx("a", {
                                                      children: t`(logout)`,
                                                      href: "/logout"
                                                    })
                                              ]
                                            });
                                }));
                  })), JsxRuntime.jsx("a", {
                  children: "login",
                  href: "/login"
                }));
}

var Viewer = {
  make: Nav$Viewer
};

var make = NavigationMenu.MenuInstance;

var MenuInstance = {
  make: make
};

function Nav(props) {
  var viewer = props.viewer;
  return JsxRuntime.jsx(Localized.WaitForMessages.make, {
              children: (function () {
                  return JsxRuntime.jsx("div", {
                              children: JsxRuntime.jsx("header", {
                                    children: JsxRuntime.jsxs("nav", {
                                          children: [
                                            JsxRuntime.jsx(ReactRouterDom.Link, {
                                                  to: "/",
                                                  children: JsxRuntime.jsx("span", {
                                                        children: t`racquet league`
                                                      })
                                                }),
                                            " - ",
                                            JsxRuntime.jsx(React.Suspense, {
                                                  children: Caml_option.some(JsxRuntime.jsx(Nav$Viewer, {
                                                            viewer: viewer
                                                          })),
                                                  fallback: "..."
                                                }),
                                            " ",
                                            JsxRuntime.jsx(LangSwitch.make, {})
                                          ]
                                        })
                                  })
                            });
                })
            });
}

var make$1 = Nav;

var $$default = Nav;

export {
  Viewer ,
  MenuInstance ,
  make$1 as make,
  $$default as default,
}
/*  Not a pure module */
